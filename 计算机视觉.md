# 计算机视觉

## 1.计算机视觉定义

#### 1.1 定义

是一门研究如何使机器“看”的科学，更进一步的说，就是是指用摄影机和电脑代替人眼对目标进行识别 、跟踪和测量等，并进一步做图形处理，用电脑处理成为更适合人眼观察或传送给仪器检测的图像。 

#### 1.2 计算机视觉相对人类视觉的优缺点

##### 1.2.1 缺点

1. 人可通过视觉和听觉，语言与外界交换信息，而目前的计算机视觉基本是仅通过视频来按照某种规则来进行工作的一种程序。
2. 环境适应能力较弱，人类可以根据少量视频或图像资源进行识别、推理，而计算机视觉不具备这种能力
3. 人类双目视觉看到的物体是三维的，而大多计算机视觉是基于二维视频进行分析的，缺少深度信息。

##### 1.2.2 优点

1. 计算机可以有各种成像方式，可以看到人眼看不到的东西。
2. 根据设定程序或者规则运行，很少会产生人类视觉一样的错觉现象。
3. 无疲劳，在规则较简单、环境较简单的应用场景中性能优于人类视觉。

## 2. 像素间的关系

![image-20230618121720112](C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20230618121720112.png)

#### 2.1 像素间邻域

1. **邻接**：对两个像素p和q来说，如果q在p的邻域中，则称p和q满足邻接关系
2. **连接**：p和q邻接且灰度值均满足某个特定的相似准则
3. **连通**：不（直接）邻接，但均在另一个像素的相同邻域中， 且这3个像素的灰度值均满足某个特定的相似准则
4. **通路**：两个像素p和q间有一系列依次连接的像素使得p和q是 连通的，则这些像素构成p和q间的通路

几种像素关系之间的关系：

![image-20230618122049539](C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20230618122049539.png)

#### 2.2 像素间的距离

![image-20230618122338091](C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20230618122338091.png)

## 3.图像采集

### 3.1 定义

计算机视觉过程是从获取客观世界的图像开始的，图像采集是获取图像的技术或手段。 

图像采集需要解决的问题： 

  (1) 利用几何光学原理解决场景中目标投影在图像中位置问题。

  (2)利用辐射学或光度学建立场景中目标亮度和图像中对应幅度值的关系。

### 3.2 采集装置

- CCD摄像机
- CMOS摄像机
- CID摄像机

采集装置的性能指标：

1. 线性响应
2. 灵敏度
3. 空间分辨率
4. 幅度分辨率
5. 信噪比
6. 快门速度
7. 读出速度

### 3.3 采集模型

#### 3.3.1 几何成像模型

图像采集的过程从几何角度可看作是一个将客观世界的场景通过投影进行空间转化的过程。称为投影成像系统。

  投影成像涉及到在不同坐标系统之间的转换

 (1)　世界坐标系统：XYZ 

 (2)　摄像机坐标系统：*xyz* 

 (3)　图像平面坐标系统：x'y‘ 

 一般取图像平面与摄像机坐标系统的*x**y*平面平行，且*x*轴与*x**'*轴、*y*轴与*y**'*轴分别重合 。这样图像平面中心点就在光轴上  。

![image-20230618123007587](C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20230618123007587.png)

 λ表示 镜头焦距，镜头中心点坐标为(0,0,λ）， 假设(X,Y,Z)表示世界坐标系W中的任意点。借助相似三角形得到图像坐标和世界坐标的关系。
$$
x=\frac{\lambda X}{\lambda-Z},y=\frac{\lambda Y}{\lambda -Z}
$$

#### 3.3.2 图像平面与摄像机平面之间的关系

假设每一个像素在x’轴和y’轴方向上的物理尺寸为dx和dy，有：
$$
x'=\frac{x}{dx}+x_0
$$

$$
y'=\frac{y}{dy}+y_0
$$

## 4.基元检测

**基元**泛指图像中有特点的基本单元，如，**边缘、角点、直线段、圆、孔等。**

- **边缘**是图像中比较低层的基元，是组成许多其他基元的基础。
- **角点**可以看做由两个边缘以接近直角相结合而构成的基元。
- **直线段**可看做是两个邻近又互相平行的边缘相结合而构成的基元
- **圆**是一种常见的几何形状，圆周可看做是将直线段弯曲。头尾相接得到的。
- **孔**的形状与圆相同，但一般用孔来表示比较小的圆。

## 4.1 <u>边缘检测</u>

在边缘处，灰度和结构等信息的产生突变. 边缘是一个区域的结束,也是另一个区域的开始。**沿边缘方向像素变化平缓**,**垂直于边缘方向像素变化剧烈**

**基本思想**：**导数反映图像灰度变化的显著程度．** **一阶导数的局部极大值，二阶导数的过零点**

**一般过程**：**去噪      增强        检测**        

#### 4.1.1 一阶导数算子

1. 梯度：
   $$
   
    G(x,y)=\left[
    \begin{matrix}
      G_x  \\
      G_y
     
     \end{matrix}
     \right]
   $$
   

2. 梯度的幅值：
   $$
   |G(x,y)|=\sqrt{G_x^2+G_y^2}
   $$

3. 梯度的方向：

$$
a(x,y)=\arctan(G_y/G_x)
$$

4. ![image-20230621211437397](C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20230621211437397.png)
5. ![image-20230621211443363](C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20230621211443363.png)

6. 一阶导数算子存在的问题： **图像收到噪声干扰，不能准确的检测边缘**

​		解决方法：**在边缘检测前对图像进行平滑处理**

#### 4.1.2 二阶导数算子

图像强度的二阶导数的零点即为边缘点。

**1. 拉普拉斯算子**
$$
{\nabla ^2}f = \frac{{{\partial ^2}f}}{{\partial {x^2}}} + \frac{{{\partial ^2}f}}{{\partial {y^2}}}
$$

$$
\begin{aligned}
\frac{{{\partial ^2}f}}{{\partial {x^2}}} &= \frac{{\partial {G_x}}}{{\partial x}}\\
 &= \frac{{\partial (f[x + 1,y] - f[x,y])}}{{\partial x}}\\
 &= \frac{{\partial f[x + 1,y]}}{{\partial x}} - \frac{{\partial f[x,y]}}{{\partial x}}\\
 &= f[x + 2,y] - 2f[x + 1,y] + f[x,y]
\end{aligned}
$$

可以以各种经验定义拉普拉斯算子：

1. 用算子表示：
   $$
   {\nabla ^2} \approx \left[ {\begin{array}{*{20}{c}}
   0&1&0\\
   1&{ - 4}&1\\
   0&1&0
   \end{array}} \right]
   $$
   

2. 希望邻域中心点具有更大的权值：
   $$
   {\nabla ^2} \approx \left[ {\begin{array}{*{20}{c}}
   1&4&1\\
   4&{ -20}&4\\
   1&4&1
   \end{array}} \right]
   $$
   

**要求矩阵内系数和=0**

**2. Canny算子**

